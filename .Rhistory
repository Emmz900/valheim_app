runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
filtered_weapons()
runApp()
weapons_list <- unique(weapons_data_clean$name)
tools_list <- unique(weapons_crafting_clean$item)
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
weapons_crafting_clean <- read_csv("clean_data/weapons_crafting")
weapons_data_clean <- read_csv("clean_data/weapon_data")
weapons_joined <-
full_join(weapons_crafting_small,
weapons_data_small,
by = join_by(item == name)) %>%
filter(!type %in% c("Upgrade", "Tool", "Shield", "Magic", "Weapon"))
weapons_joined
shiny::runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
library(tidyverse)
library(bslib)
library(plotly)
weapons_crafting_clean <- read_csv("clean_data/weapons_crafting")
weapons_data_clean <- read_csv("clean_data/weapon_data")
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
weapons_joined <-
full_join(weapons_crafting_small,
weapons_data_small,
by = join_by(item == name),
relationship = "many-to-many") %>%
filter(!type %in% c("Upgrade", "Tool", "Shield", "Magic", "Weapon"))
runApp('shiny_app_scripts')
weapons_data_clean
weapons_data_clean <- read_csv(here("clean_data/weapon_data"))
weapons_data_clean
weapons_data_clean <- read_csv(here("clean_data/weapon_data.csv"))
weapons_data_clean
runApp('shiny_app_scripts')
library(tidyverse)
library(readxl)
crafting_data <- read_xlsx("../raw_data/crafting.xlsx")
crafting_data <- read_xlsx(".../raw_data/crafting.xlsx")
library(tidyverse)
library(readxl)
crafting_data <- read_xlsx("raw_data/crafting.xlsx")
weapon_data <- read_xlsx("raw_data/crafting.xlsx", sheet = 2)
crafting_data_clean <- janitor::clean_names(crafting_data) %>%
mutate(across(where(is.character), str_to_title)) %>%
mutate(upgrade_level = coalesce(upgrade_level, 1))
write_csv(crafting_data_clean, "valheim_app/clean_data/weapons_crafting.csv")
crafting_data_clean <- janitor::clean_names(crafting_data) %>%
mutate(across(where(is.character), str_to_title)) %>%
mutate(upgrade_level = coalesce(upgrade_level, 1))
write_csv(crafting_data_clean, "clean_data/weapons_crafting.csv")
weapon_data_split <- weapon_data %>%
janitor::clean_names() %>%
select(-dps, -stamina) %>%
mutate(
type = str_to_title(str_remove(type, "s$")), # remove plurals
damage_type = str_to_title(str_extract(damage, "[A-Z][a-z]+")), # Extract damage type from damage column
damage = str_extract(damage, "[\\.0-9/]+"), # Extract damage values
backstab = as.numeric(str_remove(backstab, "x")), # Remove x from backstab and convert to numeric
) %>%
mutate(
# Rename total damage column
max_total_damage = max_damage,
min_damage = as.numeric(str_extract(damage, "[0-9]+")),
max_damage = as.numeric(str_extract(damage, "[0-9\\.]+$")),
# rename damage and dps types
damage_type_max = paste0(damage_type, "_max"),
damage_type_min = paste0(damage_type, "_min"),
damage_type_diff = paste0(damage_type, "_diff"),
backstab_x10 = backstab * 10, #increase backstab for readability on plot
type = case_when( # correct knives to knife
type == "Knive" ~ "Knife",
.default = type
)
) %>%
# add columns for the difference between min and max
mutate(
diff_damage = max_damage - min_damage
) %>%
select(-damage, -total_damage, -damage_type, -backstab)
weapon_data_long <- weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage) %>%
pivot_longer(-c(name,type), names_to = "damage_type", values_to = "values") %>%
mutate(across(where(is.character), str_to_title)) %>%
distinct() %>%
# Add min_max column and simplify damage type column
mutate(min_max = #
case_when(
str_detect(damage_type, "_min") ~ "min",
str_detect(damage_type, "_max") ~ "max",
str_detect(damage_type, "_diff") ~ "diff"
),
damage_type = str_remove(damage_type, "_min|_max|_diff")
) %>%
mutate(min_max = coalesce(min_max, "min"))
write_csv(weapon_data_long, "clean_data/weapon_data.csv")
shiny::runApp('shiny_app_scripts')
library(tidyverse)
weapons_crafting_clean <- read_csv("clean_data/weapons_crafting.csv")
library(tidyverse)
library(here)
weapons_crafting_clean <- read_csv(here("clean_data/weapons_crafting.csv"))
weapons_data_clean <- read_csv(here("clean_data/weapon_data.csv"))
weapons_data_clean
weapon_data_split
weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage)
weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage) %>%
pivot_longer(-c(name,type), names_to = "damage_type", values_to = "values")
weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage) %>%
pivot_longer(-c(name,type), names_to = "damage_type", values_to = "values") %>%
mutate(across(where(is.character), str_to_title)) %>%
distinct()
weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage) %>%
pivot_longer(-c(name,type), names_to = "damage_type", values_to = "values") %>%
mutate(across(where(is.character), str_to_title)) %>%
distinct() %>%
# Add min_max column and simplify damage type column
mutate(min_max = #
case_when(
str_detect(damage_type, "_min") ~ "min",
str_detect(damage_type, "_max") ~ "max",
str_detect(damage_type, "_diff") ~ "diff"
),
damage_type = str_remove(damage_type, "_min|_max|_diff")
)
weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage) %>%
pivot_longer(-c(name,type), names_to = "damage_type", values_to = "values") %>%
mutate(across(where(is.character), str_to_title)) %>%
distinct() %>%
# Add min_max column and simplify damage type column
mutate(min_max = #
case_when(
str_detect(damage_type, "_min") ~ "min",
str_detect(damage_type, "_max") ~ "max",
str_detect(damage_type, "_diff") ~ "diff"
)
)
weapons_crafting_clean %>%
filter(item == "tankard") %>%
filter(upgrade_level == 1) %>%
select(material, amount_of_material) %>%
rename("Material" = material, "Amount of Material" = amount_of_material)
weapons_crafting_clean %>%
filter(item == "Finewood Bow") %>%
filter(upgrade_level == 1) %>%
select(material, amount_of_material) %>%
rename("Material" = material, "Amount of Material" = amount_of_material)
weapons_crafting_clean %>%
filter(item == "Silver Sword") %>%
filter(upgrade_level == 1) %>%
select(material, amount_of_material) %>%
rename("Material" = material, "Amount of Material" = amount_of_material)
weapons_crafting_clean %>%
filter(item == "Silver Sword") %>%
filter(upgrade_level == 1) %>%
distinct(crafting_station) %>%
pull() %>%
str_to_title()
weapons_crafting_clean %>%
filter(item == "Silver Sword") %>%
filter(upgrade_level == 1) %>%
distinct(crafting_station_level) %>%
pull()
weapons_data_clean %>%
filter(name == "Silver Sword") %>%
mutate(min_max = case_when(
str_detect(damage_type, "_min") ~ "min",
str_detect(damage_type, "_max") ~ "max",
str_detect(damage_type, "_diff") ~ "diff"
),
damage_type = str_remove(damage_type, "_min|_max|_diff")
) %>%
mutate(min_max = coalesce(min_max, "min")) %>%
filter(min_max != "max") %>%
ggplot(aes(damage_type, values, fill = min_max)) +
geom_col(show.legend = FALSE) +
scale_fill_manual(values = c(
"diff" = "green4",
"min" = "green3"
)) +
theme_classic()+
labs(
x = "Damage Type",
y = "Damage Values"
) +
theme(
axis.title = element_text(size = 12)
)
weapons_data_clean %>%
filter(name == "fire arrow") %>%
mutate(min_max =
case_when(
str_detect(damage_type, "_min") ~ "min",
str_detect(damage_type, "_max") ~ "max",
str_detect(damage_type, "_diff") ~ "diff"
),
damage_type = str_remove(damage_type, "_min|_max|_diff")
) %>%
mutate(min_max = coalesce(min_max, "min")) %>%
filter(min_max != "max") %>%
ggplot(aes(damage_type, values, fill = min_max)) +
geom_col(show.legend = FALSE) +
scale_fill_manual(values = c(
"diff" = "green4",
"min" = "green3"
)) +
theme_classic() +
labs(
x = "Damage Type",
y = "Damage Values"
) +
theme(axis.title = element_text(size = 12))
weapons_data_clean %>%
filter(name == "Silver Sword",
min_max != "max")
weapons_data_clean %>%
filter(name == "Silver Sword",
min_max != "max") %>%
ggplot(aes(damage_type, values, fill = min_max)) +
geom_col(show.legend = FALSE) +
scale_fill_manual(values = c(
"diff" = "green4",
"min" = "green3"
)) +
theme_classic()+
labs(
x = "Damage Type",
y = "Damage Values"
) +
theme(
axis.title = element_text(size = 12)
)
runApp('shiny_app_scripts')
weapons_data_clean
weapons_data_small <- weapons_data_clean %>%
select(name, damage_type, values, min_max) %>%
distinct()
weapons_joined <-
full_join(weapons_crafting_small,
weapons_data_small,
by = join_by(item == name),
relationship = "many-to-many") %>%
filter(!type %in% c("Upgrade", "Tool", "Shield", "Magic", "Weapon"))
weapons_joined
weapon_type_list <- weapons_joined %>%
filter(!type %in% c("upgrade", "tool", "shield", "magic", "weapon")) %>%
mutate(type = str_to_title(type)) %>%
distinct(type) %>%
pull() %>%
append("All")
weapons_joined %>%
filter(material == "wood")
weapon_type_list
weapon_data_split <- weapon_data %>%
janitor::clean_names() %>%
select(-dps, -stamina) %>%
mutate(
type = str_to_title(str_remove(type, "s$")), # remove plurals
damage_type = str_to_title(str_extract(damage, "[A-Z][a-z]+")), # Extract damage type from damage column
damage = str_extract(damage, "[\\.0-9/]+"), # Extract damage values
backstab = as.numeric(str_remove(backstab, "x")), # Remove x from backstab and convert to numeric
) %>%
mutate(
# Rename total damage column
max_total_damage = max_damage,
min_damage = as.numeric(str_extract(damage, "[0-9]+")),
max_damage = as.numeric(str_extract(damage, "[0-9\\.]+$")),
# rename damage and dps types
damage_type_max = paste0(damage_type, "_max"),
damage_type_min = paste0(damage_type, "_min"),
damage_type_diff = paste0(damage_type, "_diff"),
backstab_x10 = backstab * 10, #increase backstab for readability on plot
type = case_when( # correct knives to knife
type == "Knive" ~ "Knife",
type == "2 Handed Club" ~ "Club",
.default = type
)
) %>%
# add columns for the difference between min and max
mutate(
diff_damage = max_damage - min_damage
) %>%
select(-damage, -total_damage, -damage_type, -backstab)
weapon_data_long <- weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage) %>%
pivot_longer(-c(name,type), names_to = "damage_type", values_to = "values") %>%
mutate(across(where(is.character), str_to_title)) %>%
distinct() %>%
# Add min_max column and simplify damage type column
mutate(min_max = #
case_when(
str_detect(damage_type, "_min") ~ "min",
str_detect(damage_type, "_max") ~ "max",
str_detect(damage_type, "_diff") ~ "diff"
),
damage_type = str_remove(damage_type, "_min|_max|_diff")
) %>%
mutate(min_max = coalesce(min_max, "min"))
write_csv(weapon_data_long, "clean_data/weapon_data.csv")
runApp('shiny_app_scripts')
weapons_joined
runApp('shiny_app_scripts')
weapon_data_split <- weapon_data %>%
janitor::clean_names() %>%
select(-dps, -stamina) %>%
mutate(
type = str_to_title(str_remove(type, "s$")), # remove plurals
damage_type = str_to_title(str_extract(damage, "[A-Z][a-z]+")), # Extract damage type from damage column
damage = str_extract(damage, "[\\.0-9/]+"), # Extract damage values
backstab = as.numeric(str_remove(backstab, "x")), # Remove x from backstab and convert to numeric
) %>%
mutate(
# Rename total damage column
TOTAL = max_damage,
min_damage = as.numeric(str_extract(damage, "[0-9]+")),
max_damage = as.numeric(str_extract(damage, "[0-9\\.]+$")),
# rename damage and dps types
damage_type_max = paste0(damage_type, "_max"),
damage_type_min = paste0(damage_type, "_min"),
damage_type_diff = paste0(damage_type, "_diff"),
backstab_x10 = backstab * 10, #increase backstab for readability on plot
type = case_when( # correct knives to knife
type == "Knive" ~ "Knife",
type == "2 Handed Club" ~ "Club",
.default = type
)
) %>%
# add columns for the difference between min and max
mutate(
diff_damage = max_damage - min_damage
) %>%
select(-damage, -total_damage, -damage_type, -backstab)
weapon_data_long <- weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage) %>%
pivot_longer(-c(name,type), names_to = "damage_type", values_to = "values") %>%
mutate(across(where(is.character), str_to_title)) %>%
distinct() %>%
# Add min_max column and simplify damage type column
mutate(min_max = #
case_when(
str_detect(damage_type, "_min") ~ "min",
str_detect(damage_type, "_max") ~ "max",
str_detect(damage_type, "_diff") ~ "diff"
),
damage_type = str_remove(damage_type, "_min|_max|_diff")
) %>%
mutate(min_max = coalesce(min_max, "min"))
write_csv(weapon_data_long, "clean_data/weapon_data.csv")
weapon_data_long
weapon_data_split
weapon_data_split <- weapon_data %>%
janitor::clean_names() %>%
select(-dps, -stamina) %>%
mutate(
type = str_to_title(str_remove(type, "s$")), # remove plurals
damage_type = str_to_title(str_extract(damage, "[A-Z][a-z]+")), # Extract damage type from damage column
damage = str_extract(damage, "[\\.0-9/]+"), # Extract damage values
backstab = as.numeric(str_remove(backstab, "x")), # Remove x from backstab and convert to numeric
) %>%
mutate(
# Rename total damage column
TOTAL = max_damage,
min_damage = as.numeric(str_extract(damage, "[0-9]+")),
max_damage = as.numeric(str_extract(damage, "[0-9\\.]+$")),
# rename damage and dps types
damage_type_max = paste0(damage_type, "_max"),
damage_type_min = paste0(damage_type, "_min"),
damage_type_diff = paste0(damage_type, "_diff"),
backstab_x10 = backstab * 10, #increase backstab for readability on plot
type = case_when(
type == "Knive" ~ "Knife",
type == "2 Handed Club" ~ "Club",
type == "Two-Handed Axe" ~ "Axe",
.default = type
)
) %>%
# add columns for the difference between min and max
mutate(
diff_damage = max_damage - min_damage
) %>%
select(-damage, -total_damage, -damage_type, -backstab)
weapon_data_long <- weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage) %>%
pivot_longer(-c(name,type), names_to = "damage_type", values_to = "values") %>%
mutate(across(where(is.character), str_to_title)) %>%
distinct() %>%
# Add min_max column and simplify damage type column
mutate(min_max = #
case_when(
str_detect(damage_type, "_min") ~ "min",
str_detect(damage_type, "_max") ~ "max",
str_detect(damage_type, "_diff") ~ "diff"
),
damage_type = str_remove(damage_type, "_min|_max|_diff")
) %>%
mutate(min_max = coalesce(min_max, "min"))
write_csv(weapon_data_long, "clean_data/weapon_data.csv")
weapon_data_split
weapon_data_split <- weapon_data %>%
janitor::clean_names() %>%
select(-dps, -stamina) %>%
mutate(
type = str_to_title(str_remove(type, "s$")), # remove plurals
damage_type = str_to_title(str_extract(damage, "[A-Z][a-z]+")), # Extract damage type from damage column
damage = str_extract(damage, "[\\.0-9/]+"), # Extract damage values
backstab = as.numeric(str_remove(backstab, "x")), # Remove x from backstab and convert to numeric
) %>%
mutate(
# Rename total damage column
TOTAL = max_damage,
min_damage = as.numeric(str_extract(damage, "[0-9]+")),
max_damage = as.numeric(str_extract(damage, "[0-9\\.]+$")),
# rename damage and dps types
damage_type_max = paste0(damage_type, "_max"),
damage_type_min = paste0(damage_type, "_min"),
damage_type_diff = paste0(damage_type, "_diff"),
backstab_x10 = backstab * 10, #increase backstab for readability on plot
type = case_when(
type == "Knive" ~ "Knife",
type == "2 Handed Club" ~ "Club",
type == "Two-Handed Axe" ~ "Axe",
.default = type
)
) %>%
# add columns for the difference between min and max
mutate(
diff_damage = max_damage - min_damage
) %>%
select(-damage, -total_damage, -damage_type, -backstab)
weapon_data_split
weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage) %>%
pivot_longer(-c(name,type), names_to = "damage_type", values_to = "values")
weapon_data_long
weapon_data_split %>%
# make damage type columns before pivoting all damage indicators into two columns
pivot_wider(names_from = damage_type_max, values_from = max_damage) %>%
pivot_wider(names_from = damage_type_min, values_from = min_damage) %>%
pivot_wider(names_from = damage_type_diff, values_from = diff_damage)
weapon_data_split
source("~/Games/Valheim/valheim_app/cleaning_and_test_scripts/cleaning_crafting.R", echo=TRUE)
library(tidyverse)
library(here)
weapons_crafting_clean <- read_csv(here("clean_data/weapons_crafting.csv"))
weapons_data_clean <- read_csv(here("clean_data/weapon_data.csv"))
weapon_data_long
weapon_data_long %>%
filter(damage_type == "Na")
source("~/Games/Valheim/valheim_app/cleaning_and_test_scripts/cleaning_crafting.R", echo=TRUE)
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
runApp('shiny_app_scripts')
